function t(){return null==N&&(N=0!==document.URL.indexOf("http://")&&0!==document.URL.indexOf("https://")),N}function e(t,e){var i;if(t.indexOf(":")>-1){var a=t.split(":");t=a[0],i=a[1]}var s=document.createElement(t);return i&&(s.type=i),o(s,e),s}function o(t,o){for(var i in o){var a=o[i];if(null!=a)try{if("omiteNulo"==i)continue;if("textos"==i)for(var s=a.split("\\n"),n=0;n<s.length;n++){var r=s[n];if(r.indexOf("\\t")>-1)for(var c=r.split("\\t"),l=0;l<c.length;l++)t.appendChild(document.createTextNode(" ")),t.appendChild(document.createTextNode(c[l]));else t.appendChild(document.createTextNode(r));n<s.length-1&&t.appendChild(e("BR"))}else if("texto"==i)t.appendChild(document.createTextNode(a));else if("circle"==i){var p=document.createElement("i");p.className=a,t.firstChild?t.insertBefore(p,t.firstChild):t.appendChild(p)}else if("i"==i){var p=document.createElement("i");p.className=a,t.firstChild?t.insertBefore(p,t.firstChild):t.appendChild(p)}else if("mi"==i){var p=document.createElement("i");p.className="zmdi zmdi-"+a,t.appendChild(p)}else if("mi_circle"==i){var p=document.createElement("i");p.className="zmdi zmdi-"+a;var d=document.createElement("i");d.className="material-icons circle",d.appendChild(p),t.appendChild(d)}else if("hijos"==i)for(var n=0;n<a.length;n++){var r=a[n];t.appendChild(r)}else"hijo"==i?t.appendChild(a):0==i.indexOf("style.")?(i=i.substring(6),["left","top","width","height"].indexOf(i)>-1&&(a=a.toString(),-1==a.indexOf("px")&&-1==a.indexOf("%")&&(a+="px")),t.style[i]=a):0==i.indexOf("attr.")?(i=i.substring(5),t.setAttribute(i,a)):0==i.indexOf("data-")?t.setAttribute(i,a):"html"==i?t.innerHTML=a:t[i]=a}catch(t){}}}function i(t){return document.createTextNode(t)}function a(t,e){if(null==t)return[];var o=function(t,o){for(var i in e)if(0==i.indexOf("_contains_")){var a=i.substr("_contains_".length),s=t[a];if(-1==s.toLowerCase().indexOf((e[i]+"").toLowerCase()))return!1}else if(e[i]!=t[i])return!1;return!0};return jQuery.grep(t,o)}function s(t,e,o){if(null==t)return-1;var i=0;t.map(function(t){t._idx=i,i++});var t=a(t,e);if(0==t.length)return-1;if(null!=o&&1==o){for(var s=[],n=0;n<t.length;n++)s.push(t[n]._idx);return s}return t[0]._idx}function n(t){return JSON.parse(localStorage.getItem(t))}function r(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){t instanceof QuotaExceededError&&C.trackEvent("Error","QuotaExceededError")}}function c(){this.vistaActiva=null,this.state={data:data,notas:n("notas")||{},favoritos:n("favoritos")||[]}}function l(){if(this.domMenu=jQuery("#navigation_bar .btn-search"),null!=this.id){var t=this.id.slice(0,1).toLowerCase()+this.id.slice(1);C[t]=this,this.loaded=!1}}function p(){this.id="VistaHome",l.call(this)}function d(t){this.id="VistaIndice",this.title="ÍNDICE DE CAPÍTULOS",l.call(this)}function u(t,e,o){this.id="VistaCapitulo",l.call(this),this.cap=t,this.apartado=e,this.searchString=o,this.domTitle=null,this.domSubTitle=null}function h(t){this.id="VistaAutores",this.cap=t,this.title="Autores",l.call(this)}function m(t){this.id="VistaPDF",l.call(this),this.cap=t}function f(){l.call(this),this.id="VistaPresentacion",this.title="Presentación",this.url="data/presentacion/presentacion.html"}function v(){this.id="VistaPromueven",this.title="Promueven",l.call(this)}function y(){this.id="VistaBuscar";var t=jQuery(".modal#buscar");this.ul=t.find("ul"),this.txt=t.find("input"),this.form=M.Modal.init(t[0],{dismissible:!1}),l.call(this)}function g(){this.id="VistaLegal",this.title="Legal",this.url="data/legal/legal.html",l.call(this)}function w(){this.id="VistaNotas",this.title="Notas",l.call(this)}var N,b={};b.numRomano=function(t){var e="";return 1==t?e="I":2==t?e="II":3==t?e="III":4==t?e="IV":5==t?e="V":6==t?e="VI":7==t?e="VII":8==t?e="VIII":9==t?e="IX":10==t&&(e="X"),e+". "},c.prototype.onDeviceReady=function(){this.receivedEvent("deviceready")},c.prototype.initialize=function(){var t=(document.location.hash+"").substring(1);if(""==t)f.prototype.shouldShowAtStarUp()?l.prototype.newVistaPresentacion():l.prototype.newVistaHome();else if("VistaHome"==t)l.prototype.newVistaHome();else if("VistaIndice"==t)l.prototype.newVistaIndice();else if(t.startsWith("VistaFavoritos"))l.prototype.newVistaFavoritos();else if(t.startsWith("VistaCapitulo")){var e=t.split("/")[1],o=e.split("-"),i=C.state.data.capitulos[o[0]-1];l.prototype.newVistaCapitulo(i,o[1])}else"VistaAutores"==t?l.prototype.newVistaAutores():"VistaPDF"==t?l.prototype.newVistaPDF():"VistaPresentacion"==t?l.prototype.newVistaPresentacion():"VistaPromueven"==t?l.prototype.newVistaPromueven():"VistaLegal"==t?l.prototype.newVistaLegal():"VistaNotas"==t&&l.prototype.newVistaNotas();jQuery(".sidenav-trigger").click(function(){l.prototype.newVistaHome()}),C.state.favoritos=n("favoritos")||[],jQuery(".modal").modal()},c.prototype.receivedEvent=function(t){C.initialize()},c.prototype.backButton=function(){this.vistaActiva&&this.vistaActiva.backButton()},c.prototype.trackView=function(){},c.prototype.trackEvent=function(){},c.prototype.showThrobber=function(){},c.prototype.removeThrobber=function(){},c.prototype.search=function(){l.prototype.newVistaBuscar()};var C=new c;if(t())document.addEventListener("deviceready",function(){C.onDeviceReady()},!1);else{var j=this;$(document).ready(function(){C.onDeviceReady()})}l.prototype.tipos=["VistaHome","VistaIndice","VistaCapitulo","VistaFavoritos","VistaNotas","VistaAutores","VistaPDF","VistaPresentacion","VistaPromueven","VistaLegal"],l.prototype.toDOM=function(t){window.history.pushState({vista:this.id},this.id,"#"+this.id),C.trackView(this.id),C.showThrobber(),jQuery(".brand-logo").text(this.title);var o=jQuery("#content");C&&(C.vistaActiva=this),o.find(".vista").hide();var i=this.tipos.join(" ");jQuery("body").removeClass(i).addClass(this.id);var a;if(this.loaded)o.find(".vista."+this.id).show();else{var a=this.getBody();a instanceof Array?this.domBody=jQuery(a[0]):this.domBody=jQuery(a),this.domCont=jQuery(e("section",{"style.height":"100%"})),this.dom=o,o.append(this.domCont),this.domCont.append(a),this.tareasPostCarga()}this.domCont.removeClass(i).addClass("vista "+this.id),this.resize(),this.loaded=!0},l.prototype.tareasPostCarga=function(){},l.prototype.resize=function(){},l.prototype.backButton=function(){},l.prototype.getBody=function(){},l.prototype.concatAutores=function(t,e){for(var o="",i=0;i<t.length;i++){var s=t[i];o+=a(C.state.data.autores,{cd:s})[0][e],i==t.length-1||(i==t.length-2?o+=" y ":o+=", ")}return o},l.prototype.showMyNotes=function(){var t=C.state.notas[this.cap.cd];jQuery(".modal#myNotes #texto").val(t),jQuery(".modal#myNotes label").toggleClass("active",null!=t&&""!=t),jQuery(".modal#myNotes").modal("open")},l.prototype.saveNotes=function(){jQuery(".modal#myNotes").modal("close");var t=jQuery(".modal#myNotes #texto").val();null!=t&&(C.state.notas[this.cap.cd]=t,r("notas",C.state.notas)),C.vistaActiva==C.vistaNotas&&C.vistaNotas.refresh()},l.prototype.createAdmon=function(t,o){return e("div",{className:"admonition "+t,hijos:[e("div",{className:"row img"}),e("div",{className:"row txt",hijos:[i(o)]})]})},l.prototype.newVistaIndice=function(){if(C.vistaIndice)C.vistaIndice.toDOM();else{(new d).toDOM()}C.vistaIndice.toggleShowAll(!0)},l.prototype.newVistaFavoritos=function(){if(C.vistaIndice)C.vistaIndice.toDOM();else{(new d).toDOM()}C.vistaIndice.toggleShowAll(!1)},l.prototype.newVistaHome=function(){if(C.vistaHome)C.vistaHome.toDOM();else{(new p).toDOM()}},l.prototype.newVistaAutores=function(t){if(t instanceof Event&&(t=null),C.vistaAutores)C.vistaAutores.setCapitulo(t),C.vistaAutores.toDOM();else{new h(t).toDOM()}},l.prototype.newVistaCapitulo=function(t,e,o){if(C.vistaCapitulo)C.vistaCapitulo.toDOM(),C.vistaCapitulo.setCapitulo(t,e,o);else{new u(t,e,o).toDOM()}},l.prototype.newVistaPDF=function(t){if(C.vistaPDF)C.vistaPDF.setCapitulo(t),C.vistaPDF.toDOM();else{new m(t).toDOM()}},l.prototype.newVistaPresentacion=function(){if(C.vistaPresentacion)C.vistaPresentacion.toDOM();else{(new f).toDOM()}},l.prototype.newVistaPromueven=function(){if(C.vistaPromueven)C.vistaPromueven.toDOM();else{(new v).toDOM()}},l.prototype.newVistaBuscar=function(){if(C.vistaBuscar)C.vistaBuscar.toDOM();else{(new y).toDOM()}},l.prototype.newVistaLegal=function(){if(C.vistaLegal)C.vistaLegal.toDOM();else{(new g).toDOM()}},l.prototype.newVistaCompartir=function(){window.plugins.socialsharing.share("App Hemostasia y Trombosis, descarga gratuita\n\n  https://bit.ly/hemostrombo")},l.prototype.newvistaValorar=function(){AppRate.preferences={useLanguage:"es-ES",storeAppURL:{ios:"XX",android:"market://details?id=com.imaidea.aranediciones.hemostrombo"},simpleMode:!0,openStoreInApp:!1,callbacks:{onButtonClicked:function(t){"yes"==q[t]&&"iOS"==device.platform&&cordova.plugins.market.open("tms-apps://itunes.apple.com/app/viewContentsUserReviews/id686440022?mt=8")}},customLocale:{title:"¿Quieres valorar esta App?",message:"Solo te llevará unos segundos.",cancelButtonLabel:"No, gracias",laterButtonLabel:"Más tarde",rateButtonLabel:"Sí"}},AppRate.preferences.callbacks.onRateDialogShow=function(t){t(1)},AppRate.promptForRating(!0)},l.prototype.newVistaNotas=function(){if(C.vistaNotas)C.vistaNotas.toDOM(),C.vistaNotas.refresh();else{(new w).toDOM()}},p.prototype=new l,p.prototype.resize=function(){},p.prototype.getBody=function(){return[e("div",{className:"vista-header"}),e("div",{className:"vista-body flexcontainer grid",hijos:[this.createHomeMenu("","Presentación",this.newVistaPresentacion,"presentacion"),this.createHomeMenu("","Índice",this.newVistaIndice,"indice"),this.createHomeMenu("","Autores",this.newVistaAutores,"autores"),this.createHomeMenu("","Favoritos",this.newVistaFavoritos,"favoritos"),this.createHomeMenu("","Buscar",this.newVistaBuscar,"buscar"),this.createHomeMenu("","Notas",this.newVistaNotas,"notas"),this.createHomeMenu("","Promueven",this.newVistaPromueven,"promueven")]}),e("div",{className:"vista-bottom navbar-fixed",hijos:[e("nav",{className:"nav-wrapper",hijos:[e("ul",{className:"right",hijos:[this.createBottomBarMenu("info-outline icon-btn-legal",this.newVistaLegal),this.createBottomBarMenu("comment icon-btn-comentar",this.newvistaValorar),this.createBottomBarMenu("share icon-btn-compartir",this.newVistaCompartir)]})]})]})]},p.prototype.createHomeMenu=function(t,o,i,a){return e("div",{onclick:i,mi:t,className:"home-menu"+(a?" "+a:""),hijos:[]})},p.prototype.createBottomBarMenu=function(t,o){return e("li",{className:"bottom-menu",onclick:o,hijos:[e("a",{mi:t})]})},d.prototype=new l,d.prototype.resize=function(){},d.prototype.getBody=function(){var t=[];for(var o in C.state.data.secciones){var i=C.state.data.secciones[o];t.push(this.creaDomSeccion(o,i))}return[e("div",{className:"vista-body",hijos:[e("ul",{className:"secciones collection",hijos:t})]})]},d.prototype.tareasPostCarga=function(){for(var t in C.state.data.secciones){var e=C.state.data.secciones[t],o=this.domBody.find(".seccion[data-cd="+e.cd+"] > .capitulos");for(var i in e.capitulos){var a=e.capitulos[i],s=C.state.data.capitulos[a-1];o.append(this.creaDomCapitulo(a,s))}}},d.prototype.clickSeccion=function(t,e){t.stopPropagation(),jQuery(e).closest(".collection-item.seccion").toggleClass("collapsed")},d.prototype.clickCapitulo=function(t,e){t.stopPropagation();var o=this.getCapituloForDom(e);this.newVistaCapitulo(o)},d.prototype.clickApartado=function(t,e){t.stopPropagation();var o=this.getCapituloForDom(e),i=this.getApartadoForDom(e);this.newVistaCapitulo(o,i.cd-1)},d.prototype.clickExpandButton=function(t,e){t.stopPropagation(),jQuery(e).closest(".collection-item.capitulo").toggleClass("collapsed")},d.prototype.clickStarButton=function(t,e){t.stopPropagation();var o=jQuery(e),i=o.closest(".collection-item.capitulo");i.toggleClass("starred");var a=o.closest(".collection-item.apartado");a.toggleClass("starred");var s=i.data("cd"),n=a.data("cd"),c=s+"/"+(n-1);if(a.hasClass("starred"))C.state.favoritos.push(c);else{var l=C.state.favoritos.indexOf(c);l>-1&&C.state.favoritos.splice(l,1)}r("favoritos",C.state.favoritos)},d.prototype.getCapituloForDom=function(t){var e=jQuery(t),o=e.closest(".collection-item.capitulo").data("cd");return C.state.data.capitulos[o-1]},d.prototype.getApartadoForDom=function(t){var e=jQuery(t),o=e.closest(".collection-item.capitulo").data("cd"),i=e.closest(".collection-item.apartado").data("cd");return C.state.data.capitulos[o-1].apartados[i-1]},d.prototype.creaDomSeccion=function(t,o){var i=this;return e("li",{"data-cd":o.cd,className:"seccion collection-item collapsed",onclick:function(){i.clickSeccion(event,this)},hijos:[e("span",{className:"titulo waves-effect",texto:b.numRomano(1+Number(t))+o.ds}),e("ul",{className:"collection capitulos",hijos:[]})]})},d.prototype.creaDomCapitulo=function(t,o){var a=this,s=[],n=!1;for(var r in o.apartados){var c=o.apartados[r],l=o.cd+"/"+(c.cd-1),p=C.state.favoritos.indexOf(l)>-1;p&&(n=!0),s.push(e("li",{"data-cd":Number(r)+1,className:"collection-item apartado avatar valign-wrapper"+(p?" starred":""),onclick:function(){a.clickApartado(event,this)},hijos:[e("i",{className:"material-icons circle star waves-effect waves-circle",mi:"zmdi icon-mn-favoritos",onclick:function(){a.clickStarButton(event,this)}}),e("i",{className:"secondary-content",mi:"chevron-right"}),i(c.ds)]}))}return e("li",{"data-cd":o.cd,className:"collection-item capitulo collapsed"+(n?" starred":""),onclick:function(){a.clickCapitulo(event,this)},hijos:[e("a",{className:"waves-effect waves-circle btn secondary-content",mi:"caret-down",onclick:function(){a.clickExpandButton(event,this)}}),e("span",{className:"capNumber",texto:"Capítulo "+o.etiquetaNumCapitulo}),e("span",{className:"title",texto:o.ds}),e("p",{className:"autores",texto:this.concatAutores(o.autores,"dsNombreApe")}),e("ul",{className:"apartados collection",hijos:s})]})},d.prototype.toggleShowAll=function(t){this.domBody.toggleClass("favsOnly",!t),t?(jQuery(this.domBody).find("ul.collection.secciones").css("display","block"),jQuery(this.domBody).find(".admonition").remove()):(jQuery(".brand-logo").text("Favoritos"),0==C.state.favoritos.length&&(jQuery(this.domBody).find("ul.collection.secciones").css("display","none"),jQuery(this.domBody).append(this.createAdmon("favs","No hay ningún favorito"))))},d.prototype.actualizarFavoritos=function(){jQuery(this.domBody).find("li.capitulo.starred").removeClass("starred"),jQuery(this.domBody).find("li.apartado.starred").removeClass("starred");for(var t in C.state.favoritos){var e=C.state.favoritos[t].split("/").map(function(t){return Number(t)}),o=jQuery(this.domBody).find("li.capitulo[data-cd="+e[0]+"]"),i=o.find("li.apartado[data-cd="+(e[1]+1)+"]");o.addClass("starred"),i.addClass("starred")}},u.prototype=new l,u.prototype.resize=function(){},u.prototype.getBody=function(){var t=this;return this.contenido=e("div",{className:"book"}),this.domTitle=e("span",{className:"title"}),this.domSubTitle=e("span",{className:"subtitle"}),this.domStar=e("li",{hijos:[e("a",{mi:"zmdi icon-btn-favoritos-empty",onclick:function(){t.starChapter(this)}})]}),[e("div",{className:"vista-body",hijos:[e("div",{className:"navbar-fixed top",hijos:[e("nav",{className:"nav-wrapper secondary",hijos:[this.domTitle,this.domSubTitle]})]}),this.contenido,e("div",{className:"navbar-fixed bottom",hijos:[e("nav",{className:"nav-wrapper",hijos:[e("ul",{className:"left",hijos:[e("li",{hijos:[e("a",{mi:"zmdi icon-btn-izq",onclick:function(){t.previousChapter()}})]}),e("li",{hijos:[e("a",{mi:"zmdi icon-btn-der",onclick:function(){t.nextChapter()}})]})]}),e("ul",{className:"right",hijos:[e("li",{hijos:[e("a",{mi:"zmdi icon-mn-autores",onclick:function(){t.showMyAuthor()}})]}),e("li",{hijos:[e("a",{mi:"zmdi icon-btn-indice",onclick:function(){l.prototype.newVistaIndice()}})]}),e("li",{hijos:[e("a",{mi:"zmdi icon-btn-pdf",onclick:function(){t.showMyPDF()}})]}),e("li",{hijos:[e("a",{mi:"zmdi icon-btn-notas",onclick:function(){t.showMyNotes()}})]}),this.domStar]})]})]})]})]},u.prototype.tareasPostCarga=function(){this.setCapitulo(this.cap,this.apartado,this.searchString)},u.prototype.buscaIDSeccion=function(t){for(var e=0;e<C.state.data.secciones.length;e++){var o=C.state.data.secciones[e];if(o.capitulos.indexOf(t)>-1)return o.cd}},u.prototype.setCapitulo=function(t,e,o){var i=this;this.cap=t,this.apartado=e||0,this.searchString=o,C.showThrobber(),jQuery(this.domTitle).text(this.cap.ds);var a=this.concatAutores(this.cap.autores,"dsIniciales");jQuery(this.domSubTitle).text(a),jQuery(".brand-logo").text("SECCIÓN "+b.numRomano(this.buscaIDSeccion(t.cd))+"Capítulo "+this.cap.etiquetaNumCapitulo);var s=this.cap.apartados[this.apartado],n="<h3>Cap"+i.cap.cd+"-"+i.apartado+"</h3>";jQuery.get(s.archivo,function(t,e,o){C.removeThrobber(),"error"===e?jQuery(i.contenido).empty().append(n):(i.searchString,jQuery(i.contenido).html(t))}).fail(function(){jQuery(i.contenido).empty().append(n)});var r=this.getKey(),c=C.state.favoritos.indexOf(r)>-1;jQuery(this.domBody).find("i.icon-btn-favoritos-empty").toggleClass("icon-btn-corazon-fill",c),window.history.replaceState({vista:this.id},this.id,"#"+this.id+"/"+this.cap.cd+"-"+this.apartado)},u.prototype.getKey=function(){return this.cap.cd+"/"+this.apartado},u.prototype.starChapter=function(t){var e=this.getKey(),o=jQuery(this.domBody).find("i.icon-btn-favoritos-empty");if(o.toggleClass("icon-btn-corazon-fill"),o.hasClass("icon-btn-corazon-fill"))C.state.favoritos.push(e);else{var i=C.state.favoritos.indexOf(e);i>-1&&C.state.favoritos.splice(i,1)}r("favoritos",C.state.favoritos),C.vistaIndice&&C.vistaIndice.actualizarFavoritos()},u.prototype.previousChapter=function(){if(this.apartado=Number(this.apartado),this.apartado>0)this.apartado=this.apartado-1,this.apartado>this.cap.apartados.length-1&&(this.apartado=this.cap.apartados.length-1),this.setCapitulo(this.cap,this.apartado);else if(this.apartado<=0){var t=C.vistaActiva.cap.cd-1,e=C.state.data.capitulos[t-1];e&&this.setCapitulo(e,e.apartados.length-1)}},u.prototype.nextChapter=function(){if(this.apartado=Number(this.apartado),this.cap.apartados.length-1>this.apartado)this.apartado=this.apartado+1,this.apartado>this.cap.apartados.length-1&&(this.apartado=this.cap.apartados.length-1),this.setCapitulo(this.cap,this.apartado);else if(this.cap.apartados.length-1>=this.apartado){var t=C.vistaActiva.cap.cd,e=C.state.data.capitulos[t];e&&this.setCapitulo(e,0)}},u.prototype.showMyAuthor=function(){this.newVistaAutores(this.cap)},u.prototype.showMyPDF=function(){this.newVistaPDF(this.cap)},h.prototype=new l,h.prototype.getBody=function(){C.showThrobber();for(var t=[],o=0;o<C.state.data.autores.length;o++){for(var a=C.state.data.autores[o],s=[],n=0;n<a.centros.length;n++)s.push(i(a.centros[n])),s.push(e("BR"));for(var r=this.getCapitulosDelAutor(a),c=[],n=0;n<r.length;n++){var l=r[n];c.push(e("li",{className:"collection-item",onclick:this.fnClickCapitulo(l),hijos:[e("span",{className:"title",texto:l.ds}),e("i",{className:"secondary-content",mi:"chevron-right"})]}))}var p=a.dsApeNombre.slice(0,1);t.push(e("li",{"data-cd":o,className:"collection-item avatar autor",hijos:[e("i",{className:"material-icons circle star waves-effect waves-circle letter letter"+p}),e("span",{className:"title",texto:a.dsApeNombre}),e("p",{hijos:s}),e("ul",{className:"collection capitulos",hijos:c})]}))}return[e("div",{className:"vista-body",hijos:[e("ul",{className:"collection autores",hijos:t})]})]},h.prototype.fnClickCapitulo=function(t){return function(){l.prototype.newVistaCapitulo(t)}},h.prototype.tareasPostCarga=function(){this.setCapitulo(this.cap),C.removeThrobber()},h.prototype.getCapitulosDelAutor=function(t){for(var e=[],o=0;o<C.state.data.capitulos.length;o++){var i=C.state.data.capitulos[o];i.autores.indexOf(t.cd)>-1&&e.push(i)}return e},h.prototype.setCapitulo=function(t){if(this.cap=t,null==this.cap)this.domBody.find(".collection-item.autor").removeClass("hidden");else{this.domBody.find(".collection-item.autor").addClass("hidden");for(var e in this.cap.autores)this.domBody.find(".collection-item.autor[data-cd="+e+"]").removeClass("hidden")}},m.prototype=new l,m.prototype.toDOM=function(){C.showThrobber()},m.prototype.tareasPostCarga=function(){this.setCapitulo(this.cap),C.removeThrobber()},m.prototype.setCapitulo=function(t){this.cap=t,this.viewPDF(this.cap.pdf)},m.prototype.viewPDF=function(t){if("android"==cordova.platformId){var e=cordova.file.applicationDirectory+"www/lnk/"+t;window.resolveLocalFileSystemURL(e,function(t){window.resolveLocalFileSystemURL(cordova.file.externalDataDirectory,function(e){t.copyTo(e,"file.pdf",function(t){cordova.plugins.fileOpener2.showOpenWithDialog(t.nativeURL,"application/pdf",{error:function(t){},success:function(){}})})})})}},f.prototype=new l,f.prototype.getBody=function(){var t=this;return C.showThrobber(),this.contenido=e("div",{className:"book"}),this.checkbox=e("input",{type:"checkbox",className:"filled-in",checked:"checked"}),[e("div",{className:"vista-header"}),e("div",{className:"vista-body",hijos:[this.contenido]}),e("div",{className:"vista-bottom navbar-fixed",hijos:[e("nav",{className:"nav-wrapper",hijos:[e("ul",{className:"right",hijos:[e("li",{hijos:[e("a",{texto:"MENÚ",id:"menu",mi:"zmdi icon-btn-der",onclick:function(){t.clickBotonMenu()}})]})]}),e("ul",{className:"left",hijos:[e("li",{hijos:[e("label",{className:"form-element",hijos:[this.checkbox,e("span",{texto:"Mostrar al iniciar"})]})]})]})]})]})]},f.prototype.tareasPostCarga=function(){jQuery(this.contenido).load(this.url,function(t,e,o){C.removeThrobber(),"error"===e&&jQuery(j.contenido).empty().append("<h3>Error cargando presentación</h3>")}),C.removeThrobber()},f.prototype.clickBotonMenu=function(){var t=jQuery(this.checkbox).is(":checked");r(f.prototype.storageKey,t),l.prototype.newVistaHome()},f.prototype.storageKey="VistaPresentacion_mostrarAlIniciar",f.prototype.shouldShowAtStarUp=function(){var t=n(f.prototype.storageKey);return null==t||(t instanceof String&&""==t||1==t)},v.prototype=new l,v.prototype.getBody=function(){var t=this;C.showThrobber();for(var o=[],i=0;i<C.state.data.promueven.length;i++){var a=C.state.data.promueven[i];o.push(e("li",{className:"collection-item row",onclick:t.fnclickLink(a.url),hijos:[e("span",{className:"title col s12",texto:a.ds}),e("div",{className:"col s11",hijos:[e("img",{src:a.img})]}),e("span",{className:"secondary-content col s1",mi:"zmdi icon-btn-der"})]}))}return[e("div",{className:"vista-body",hijos:[e("ul",{className:"collection",hijos:o})]})]},v.prototype.clickLink=function(t){},v.prototype.fnclickLink=function(t){var e=this;return function(){e.clickLink(t)}},v.prototype.tareasPostCarga=function(){C.removeThrobber()},y.prototype=new l,y.prototype.toDOM=function(){this.form.open(),this.generateIndex()},y.prototype.generateIndex=function(){this.listFiles=[];for(var t=0;t<C.state.data.capitulos.length;t++)for(var e=C.state.data.capitulos[t],o=0;o<e.apartados.length;o++){var i=e.apartados[o];this.listFiles.push({archivo:i.archivo,cap_pos:t,ap:i.cd,contenido:null,literal_posicion:e.etiquetaNumCapitulo+(i.cd+1)+" - "+i.ds}),this.readFile(this.listFiles.length-1)}},y.prototype.readFile=function(t){var e=this;$.get(e.listFiles[t].archivo,function(o){e.listFiles[t].contenido=o},"text")},y.prototype.closeSearch=function(){this.form.close(),this.txt.val(null),this.ul.empty()},y.prototype.doSearch=function(){this.searchString=this.txt.val(),this.ul.empty();for(var t=0;t<this.listFiles.length;t++){var e=this.listFiles[t];this.buscar(e,e.contenido)}},y.prototype.buscar=function(t,e){var o=this;if(!(this.searchString.length<3)){var i=new RegExp(this.searchString,"ig");e=jQuery("<div></div>").html(e).text();for(var a;null!==(a=i.exec(e));){var s=a.index,n=a[0],r="..."+a.input.slice(s-45,s)+'<span class="found">'+n+"</span>"+e.slice(s+n.length,s+n.length+45)+"...";o.addResult(t,r,a)}}},y.prototype.addResult=function(t,o,i){var a=this;this.ul.append(e("li",{className:"collection-item search-result",onclick:function(){a.navigateResult(t.cap_pos,t.ap)},hijos:[e("span",{className:"title",texto:t.literal_posicion}),e("p",{html:o})]}))},y.prototype.navigateResult=function(t,e){var o=C.state.data.capitulos[t];this.form.close(),l.prototype.newVistaCapitulo(o,e-1,this.searchString)},g.prototype=new f,g.prototype.getBody=function(){return C.showThrobber(),this.contenido=e("div",{className:"book"}),this.checkbox=e("input",{type:"checkbox",className:"filled-in",checked:"checked"}),[e("div",{className:"vista-body",hijos:[this.contenido]})]},w.prototype=new l,w.prototype.getBody=function(){return C.showThrobber(),[e("div",{className:"vista-body",hijos:[e("ul",{className:"collection notas"})]})]},w.prototype.refresh=function(){var t=this,o=[],i=this.domBody.find("ul.notas").empty();for(var s in C.state.notas){var n=C.state.notas[s];if(""!=n){var r=a(C.state.data.capitulos,{cd:s})[0];o.push(e("li",{className:"collection-item avatar nota",hijos:[e("span",{className:"title",texto:r.etiquetaNumCapitulo+r.ds}),e("span",{className:"material-icons circle"}),e("p",{className:"txt nota",texto:n}),e("div",{className:"row acciones",hijos:[e("span",{className:"btn edit",mi:"edit",texto:"Editar",onclick:t.fnShowMyNotes(r)}),e("span",{className:"btn navigate",mi:"chevron-right right",texto:"Navegar",onclick:t.fnNewVistaCapitulo(r)})]})]}))}}0==o.length&&(o=[this.createAdmon("notes","No hay ninguna nota")]),i.append(o)},w.prototype.fnShowMyNotes=function(t){var e=this;return function(){e.cap=t,e.showMyNotes()}},w.prototype.fnNewVistaCapitulo=function(t){var e=this;return function(){e.newVistaCapitulo(t)}},w.prototype.tareasPostCarga=function(){this.refresh(),C.removeThrobber()};